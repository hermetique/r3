;---r3 compiler code.asm; r3/test/testasm.r3;--------------------------; :windows  |1001482|e     . I| calls:1 niv:1 len:196 (  --  )w43:;---------OPT; A661A6:"KERNEL32.DLL"	; [ ] ; A661AA:LOADLIB	; [ 7DD ] ; A661AE:DUP	; [ 7DD ] ; A661B2:"AllocConsole"	; [ 7DD 7DD ] ; A661B6:GETPROC	; [ 7DD020007DD 7FB ] ; A661BA:'sys-AllocConsole	; [ 7DD020007DD 7DD ] ; A661BE:!	; [ 7DD020007DD 0 ] ; A661C2:DUP	; [ 7DD020007DD ] ; A661C6:"ExitProcess"	; [ 7DD020007DD 7DD020007DD ] ; A661CA:GETPROC	; [ 7DD020007DD 82C ] ; A661CE:'sys-ExitProcess	; [ 7DD020007DD 7DD020007DD ] ; A661D2:!	; [ 7DD020007DD 1 ] ; A661D6:DUP	; [ 7DD020007DD ] ; A661DA:"GetStdHandle"	; [ 7DD020007DD 7DD020007DD ] ; A661DE:GETPROC	; [ 7DD020007DD 85C ] ; A661E2:'sys-GetStdHandle	; [ 7DD020007DD 7DD020007DD ] ; A661E6:!	; [ 7DD020007DD 2 ] ; A661EA:DUP	; [ 7DD020007DD ] ; A661EE:"ReadFile"	; [ 7DD020007DD 7DD020007DD ] ; A661F2:GETPROC	; [ 7DD020007DD 890 ] ; A661F6:'sys-ReadFile	; [ 7DD020007DD 7DD020007DD ]; A661FA:!	; [ 7DD020007DD 3 ] ; A661FE:DUP	; [ 7DD020007DD ] ; A66202:"WriteFile"	; [ 7DD020007DD 7DD020007DD ] ; A66206:GETPROC	; [ 7DD020007DD 8B9 ] ; A6620A:'sys-WriteFile	; [ 7DD020007DD 7DD020007DD ] ; A6620E:!	; [ 7DD020007DD 4 ] ; A66212:DUP	; [ 7DD020007DD ] ; A66216:"GetConsoleMode"	; [ 7DD020007DD 7DD020007DD ] ; A6621A:GETPROC	; [ 7DD020007DD 8E7 ] ; A6621E:'sys-GetConsoleMode	; [ 7DD020007DD 7DD020007DD ] ; A66222:!	; [ 7DD020007DD 5 ] ; A66226:DUP	; [ 7DD020007DD ] ; A6622A:"SetConsoleMode"	; [ 7DD020007DD 7DD020007DD ] ; A6622E:GETPROC	; [ 7DD020007DD 91C ] ; A66232:'sys-SetConsoleMode	; [ 7DD020007DD 7DD020007DD ] ; A66236:!	; [ 7DD020007DD 6 ] ; A6623A:DUP	; [ 7DD020007DD ] ; A6623E:"ReadConsoleInputW"	; [ 7DD020007DD 7DD020007DD ] ; A66242:GETPROC	; [ 7DD020007DD 951 ] ; A66246:'sys-ReadConsoleInput	; [ 7DD020007DD 7DD020007DD ] ; A6624A:!	; [ 7DD020007DD 7 ] ; A6624E:DUP	; [ 7DD020007DD ] ; A66252:"FlushConsoleInputBuffer"	; [ 7DD020007DD 7DD020007DD ] ; A66256:GETPROC	; [ 7DD020007DD 98B ] ; A6625A:'sys-FlushConsoleInputBuffer	; [ 7DD020007DD 7DD020007DD ] ; A6625E:!	; [ 7DD020007DD 8 ] ; A66262:DUP	; [ 7DD020007DD ] ; A66266:"Sleep"	; [ 7DD020007DD 7DD020007DD ] ; A6626A:GETPROC	; [ 7DD020007DD 9D2 ] ; A6626E:'sys-Sleep	; [ 7DD020007DD 7DD020007DD ] ; A66272:!	; [ 7DD020007DD 9 ] ; A66276:DUP	; [ 7DD020007DD ]; A6627A:"WaitForSingleObject"	; [ 7DD020007DD 7DD020007DD ] ; A6627E:GETPROC	; [ 7DD020007DD 9F5 ] ; A66282:'sys-WaitForSingleObject	; [ 7DD020007DD 7DD020007DD ] ; A66286:!	; [ 7DD020007DD A ] ; A6628A:DUP	; [ 7DD020007DD ] ; A6628E:"GetLastError"	; [ 7DD020007DD 7DD020007DD ] ; A66292:GETPROC	; [ 7DD020007DD A35 ] ; A66296:'sys-GetLastError	; [ 7DD020007DD 7DD020007DD ] ; A6629A:!	; [ 7DD020007DD B ] ; A6629E:DUP	; [ 7DD020007DD ] ; A662A2:"CreateFileA"	; [ 7DD020007DD 7DD020007DD ] ; A662A6:GETPROC	; [ 7DD020007DD A67 ] ; A662AA:'sys-CreateFile	; [ 7DD020007DD 7DD020007DD ] ; A662AE:!	; [ 7DD020007DD C ] ; A662B2:DUP	; [ 7DD020007DD ] ; A662B6:"CloseHandle"	; [ 7DD020007DD 7DD020007DD ] ; A662BA:GETPROC	; [ 7DD020007DD A96 ] ; A662BE:'sys-CloseHandle	; [ 7DD020007DD 7DD020007DD ] ; A662C2:!	; [ 7DD020007DD D ] ; A662C6:DUP	; [ 7DD020007DD ] ; A662CA:"FlushFileBuffers"	; [ 7DD020007DD 7DD020007DD ] ; A662CE:GETPROC	; [ 7DD020007DD AC5 ] ; A662D2:'sys-FlushFileBuffers	; [ 7DD020007DD 7DD020007DD ] ; A662D6:!	; [ 7DD020007DD E ] ; A662DA:DUP	; [ 7DD020007DD ] ; A662DE:"DeleteFileA"	; [ 7DD020007DD 7DD020007DD ] ; A662E2:GETPROC	; [ 7DD020007DD AFE ] ; A662E6:'sys-DeleteFile	; [ 7DD020007DD 7DD020007DD ] ; A662EA:!	; [ 7DD020007DD F ] ; A662EE:DUP	; [ 7DD020007DD ] ; A662F2:"MoveFileA"	; [ 7DD020007DD 7DD020007DD ] ; A662F6:GETPROC	; [ 7DD020007DD B2C ]; A662FA:'sys-MoveFile	; [ 7DD020007DD 7DD020007DD ] ; A662FE:!	; [ 7DD020007DD 10 ] ; A66302:DUP	; [ 7DD020007DD ] ; A66306:"SetFilePointer"	; [ 7DD020007DD 7DD020007DD ] ; A6630A:GETPROC	; [ 7DD020007DD B56 ] ; A6630E:'sys-SetFilePointer	; [ 7DD020007DD 7DD020007DD ] ; A66312:!	; [ 7DD020007DD 11 ] ; A66316:DUP	; [ 7DD020007DD ] ; A6631A:"SetEndOfFile"	; [ 7DD020007DD 7DD020007DD ] ; A6631E:GETPROC	; [ 7DD020007DD B8B ] ; A66322:'sys-SetEndOfFile	; [ 7DD020007DD 7DD020007DD ] ; A66326:!	; [ 7DD020007DD 12 ] ; A6632A:DUP	; [ 7DD020007DD ] ; A6632E:"GetFileSize"	; [ 7DD020007DD 7DD020007DD ] ; A66332:GETPROC	; [ 7DD020007DD BBC ] ; A66336:'sys-GetFileSize	; [ 7DD020007DD 7DD020007DD ] ; A6633A:!	; [ 7DD020007DD 13 ] ; A6633E:DUP	; [ 7DD020007DD ] ; A66342:"GetProcessHeap"	; [ 7DD020007DD 7DD020007DD ] ; A66346:GETPROC	; [ 7DD020007DD BED ] ; A6634A:'sys-GetProcessHeap	; [ 7DD020007DD 7DD020007DD ] ; A6634E:!	; [ 7DD020007DD 14 ] ; A66352:DUP	; [ 7DD020007DD ] ; A66356:"HeapAlloc"	; [ 7DD020007DD 7DD020007DD ] ; A6635A:GETPROC	; [ 7DD020007DD C22 ] ; A6635E:'sys-HeapAlloc	; [ 7DD020007DD 7DD020007DD ] ; A66362:!	; [ 7DD020007DD 15 ] ; A66366:DUP	; [ 7DD020007DD ] ; A6636A:"HeapFree"	; [ 7DD020007DD 7DD020007DD ] ; A6636E:GETPROC	; [ 7DD020007DD C4D ] ; A66372:'sys-HeapFree	; [ 7DD020007DD 7DD020007DD ] ; A66376:!	; [ 7DD020007DD 16 ]; A6637A:DUP	; [ 7DD020007DD ] ; A6637E:"HeapReAlloc"	; [ 7DD020007DD 7DD020007DD ] ; A66382:GETPROC	; [ 7DD020007DD C76 ] ; A66386:'sys-HeapReAlloc	; [ 7DD020007DD 7DD020007DD ] ; A6638A:!	; [ 7DD020007DD 17 ] ; A6638E:DUP	; [ 7DD020007DD ] ; A66392:"GetLocalTime"	; [ 7DD020007DD 7DD020007DD ] ; A66396:GETPROC	; [ 7DD020007DD CA7 ] ; A6639A:'sys-GetLocalTime	; [ 7DD020007DD 7DD020007DD ] ; A6639E:!	; [ 7DD020007DD 19 ] ; A663A2:DUP	; [ 7DD020007DD ] ; A663A6:"FindFirstFileA"	; [ 7DD020007DD 7DD020007DD ] ; A663AA:GETPROC	; [ 7DD020007DD CD8 ] ; A663AE:'sys-FindFirstFile	; [ 7DD020007DD 7DD020007DD ] ; A663B2:!	; [ 7DD020007DD 1A ] ; A663B6:DUP	; [ 7DD020007DD ] ; A663BA:"FindNextFileA"	; [ 7DD020007DD 7DD020007DD ] ; A663BE:GETPROC	; [ 7DD020007DD D0C ] ; A663C2:'sys-FindNextFile	; [ 7DD020007DD 7DD020007DD ] ; A663C6:!	; [ 7DD020007DD 1B ] ; A663CA:DUP	; [ 7DD020007DD ] ; A663CE:"FindClose"	; [ 7DD020007DD 7DD020007DD ] ; A663D2:GETPROC	; [ 7DD020007DD D3E ] ; A663D6:'sys-FindClose	; [ 7DD020007DD 7DD020007DD ] ; A663DA:!	; [ 7DD020007DD 1C ] ; A663DE:DUP	; [ 7DD020007DD ] ; A663E2:"CreateProcessA"	; [ 7DD020007DD 7DD020007DD ] ; A663E6:GETPROC	; [ 7DD020007DD D6B ] ; A663EA:'sys-CreateProcess	; [ 7DD020007DD 7DD020007DD ] ; A663EE:!	; [ 7DD020007DD 1D ] ; A663F2:DUP	; [ 7DD020007DD ] ; A663F6:"GetTickCount"	; [ 7DD020007DD 7DD020007DD ]; A663FA:GETPROC	; [ 7DD020007DD D9F ] ; A663FE:'sys-GetTickCount	; [ 7DD020007DD 7DD020007DD ] ; A66402:!	; [ 7DD020007DD 18 ] ; A66406:DUP	; [ 7DD020007DD ] ; A6640A:"GetConsoleScreenBufferInfo"	; [ 7DD020007DD 7DD020007DD ] ; A6640E:GETPROC	; [ 7DD020007DD DD0 ] ; A66412:'sys-GetConsoleScreenBufferInfo	; [ 7DD020007DD 7DD020007DD ] ; A66416:!	; [ 7DD020007DD 1E ] ; A6641A:DROP	; [ 7DD020007DD ] ; A6641E:AllocConsole	; [ ] ; A6600E:sys-AllocConsole	; [ ] ; A66012:SYS0	; [ 0 ] ; A66016:DROP	; [ 0 ] ; A66422:-10	; [ ] ; A66426:GetStdHandle	; [ 0 ] ; A6602A:sys-GetStdHandle	; [ 0 ] ; A6602E:SYS1	; [ 0 2 ] ; A6642A:'stdin	; [ 0 ] ; A6642E:!	; [ 0 40 ] ; A66432:-11	; [ ] ; A66436:GetStdHandle	; [ 1 ] ; A6602A:sys-GetStdHandle	; [ 1 ] ; A6602E:SYS1	; [ 1 2 ] ; A6643A:'stdout	; [ 1 ] ; A6643E:!	; [ 1 41 ] ; A66442:-12	; [ ] ; A66446:GetStdHandle	; [ 2 ] ; A6602A:sys-GetStdHandle	; [ 2 ] ; A6602E:SYS1	; [ 2 2 ] ; A6644A:'stderr	; [ 2 ] ; A6644E:!	; [ 2 42 ] ; A66452:stdin	; [ ]; A66456:'console-mode	; [ 40 ] ; A6645A:GetConsoleMode	; [ 40 3E ] ; A6604E:sys-GetConsoleMode	; [ 40 3E ] ; A66052:SYS2	; [ 3E03000040 5 ] ; A6645E:DROP	; [ 3E03000040 ] ; A66462:stdin	; [ ] ; A66466:console-mode	; [ 40 ] ; A6646A:$1a	; [ 40 3E ] ; A6646E:NEG	; [ 3E04000040 3 ] ; A66472:AND	; [ 3E04000040 3 ] ; A66476:SetConsoleMode	; [ 3E04000040 3E ] ; A6605A:sys-SetConsoleMode	; [ 3E04000040 3E ] ; A6605E:SYS2	; [ 3E04000040 6 ] ; A6647A:DROP	; [ 3E04000040 ] ; A6647E:stdout	; [ ] ; A66482:'console-mode	; [ 41 ] ; A66486:GetConsoleMode	; [ 41 3E ] ; A6604E:sys-GetConsoleMode	; [ 41 3E ] ; A66052:SYS2	; [ 3E03000041 5 ] ; A6648A:DROP	; [ 3E03000041 ] ; A6648E:stdout	; [ ] ; A66492:console-mode	; [ 41 ] ; A66496:$4	; [ 41 3E ] ; A6649A:OR	; [ 3E04000041 4 ] ; A6649E:SetConsoleMode	; [ 3E04000041 3E ] ; A6605A:sys-SetConsoleMode	; [ 3E04000041 3E ] ; A6605E:SYS2	; [ 3E04000041 6 ] ; A664A2:DROP	; [ 3E04000041 ] ; A664A6:GetProcessHeap	; [ ] ; A6610E:sys-GetProcessHeap	; [ ] ; A66112:SYS0	; [ 14 ] ; A664AA:'process-heap	; [ 14 ]; A664AE:!	; [ 14 3F ] ; A664B2:;	; [ ] ;---------ANA;---------GEN; "KERNEL32.DLL"; OPTS LOADLIBinvoke LoadLibraryA,str7DD; DUPadd rbp,8mov [rbp],rax; "AllocConsole"; OPTS GETPROCinvoke GetProcAddress,rax,str7FB; 'sys-AllocConsole; OPTAV !mov qword[w0],raxmov rax,[rbp]; "HeapFree"; OPTS GETPROCinvoke GetProcAddress,rax,strC4D; 'sys-HeapFree; OPTAV !mov qword[w16],raxmov rax,[rbp]; "HeapAlloc"; OPTS GETPROCcinvoke64 GetProcAddress,rax,strC22; 'sys-HeapAlloc; OPTAV !mov qword[w15],raxmov rax,[rbp]; "HeapReAlloc"; OPTS GETPROCinvoke GetProcAddress,rax,strC76; 'sys-HeapReAlloc; OPTAV !mov qword[w17],raxmov rax,[rbp]; "GetLocalTime"; OPTS GETPROCinvoke GetProcAddress,rax,strCA7; 'sys-GetLocalTime; OPTAV !mov qword[w19],raxmov rax,[rbp]; "FindFirstFileA"; OPTS GETPROCinvoke GetProcAddress,rax,strCD8; 'sys-FindFirstFile; OPTAV !mov qword[w1A],raxmov rax,[rbp]; "FindNextFileA"; OPTS GETPROCinvoke GetProcAddress,rax,strD0C; 'sys-FindNextFile; OPTAV !mov qword[w1B],raxmov rax,[rbp]; "FindClose"; OPTS GETPROCinvoke GetProcAddress,rax,strD3E; 'sys-FindClose; OPTAV !mov qword[w1C],raxmov rax,[rbp]; "CreateProcessA"; OPTS GETPROCinvoke GetProcAddress,rax,strD6B; 'sys-CreateProcess; OPTAV !mov qword[w1D],raxmov rax,[rbp]; "GetTickCount"; OPTS GETPROCinvoke GetProcAddress,rax,strD9F; 'sys-GetTickCount; OPTAV !mov qword[w18],raxmov rax,[rbp]; "GetConsoleScreenBufferInfo"; OPTS GETPROCinvoke GetProcAddress,rax,strDD0; 'sys-GetConsoleScreenBufferInfo; OPTAV !mov qword[w1E],raxmov rax,[rbp]sub rbp,8; DROPmov rax,[rbp]sub rbp,8; sys-AllocConsoleadd rbp,8mov [rbp],raxmov rax,qword[w0]; SYS0sub rsp,$28call raxadd rsp,$28; DROPmov rax,[rbp]sub rbp,8; -10add rbp,8mov [rbp],raxmov rax,-10; sys-GetStdHandleadd rbp,8mov [rbp],raxmov rax,qword[w2]; SYS1sub rsp,$28mov rcx,[rbp]sub rbp,8call raxadd rsp,$28; 'stdin; OPTAV !mov qword[w40],raxmov rax,[rbp]sub rbp,8; -11add rbp,8mov [rbp],raxmov rax,-11; sys-GetStdHandleadd rbp,8mov [rbp],raxmov rax,qword[w2]; SYS1sub rsp,$28mov rcx,[rbp]sub rbp,8call raxadd rsp,$28; 'stdout; OPTAV !mov qword[w41],raxmov rax,[rbp]sub rbp,8; -12add rbp,8mov [rbp],raxmov rax,-12; sys-GetStdHandleadd rbp,8mov [rbp],raxmov rax,qword[w2]; SYS1sub rsp,$28mov rcx,[rbp]sub rbp,8call raxadd rsp,$28; 'stderr; OPTAV !mov qword[w42],raxmov rax,[rbp]sub rbp,8; stdinadd rbp,8mov [rbp],raxmov rax,qword[w40]; 'console-modeadd rbp,8mov [rbp],raxmov rax,w3E; sys-GetConsoleModeadd rbp,8mov [rbp],raxmov rax,qword[w5]; SYS2sub rsp,$28mov rdx,[rbp-1*8]mov rcx,[rbp]sub rbp,8*2call raxadd rsp,$28; DROPmov rax,[rbp]sub rbp,8; stdinadd rbp,8mov [rbp],raxmov rax,qword[w40]; console-modeadd rbp,8mov [rbp],raxmov rax,qword[w3E]; $FFFFFFFFFFFFFFE6 ; calc; OPTC ANDand rax,-26; sys-SetConsoleModeadd rbp,8mov [rbp],raxmov rax,qword[w6]; SYS2sub rsp,$28mov rdx,[rbp-1*8]mov rcx,[rbp]sub rbp,8*2call raxadd rsp,$28; DROPmov rax,[rbp]sub rbp,8; stdoutadd rbp,8mov [rbp],raxmov rax,qword[w41]; 'console-modeadd rbp,8mov [rbp],raxmov rax,w3E; sys-GetConsoleModeadd rbp,8mov [rbp],raxmov rax,qword[w5]; SYS2sub rsp,$28mov rdx,[rbp-1*8]mov rcx,[rbp]sub rbp,8*2call raxadd rsp,$28; DROPmov rax,[rbp]sub rbp,8; stdoutadd rbp,8mov [rbp],raxmov rax,qword[w41]; console-modeadd rbp,8mov [rbp],raxmov rax,qword[w3E]; $4; OPTN ORor rax,4; sys-SetConsoleModeadd rbp,8mov [rbp],raxmov rax,qword[w6]; SYS2sub rsp,$28mov rdx,[rbp-1*8]mov rcx,[rbp]sub rbp,8*2call raxadd rsp,$28; DROPmov rax,[rbp]sub rbp,8; sys-GetProcessHeapadd rbp,8mov [rbp],raxmov rax,qword[w14]; SYS0sub rsp,$28call raxadd rsp,$28; 'process-heap; OPTAV !mov qword[w3F],raxmov rax,[rbp]sub rbp,8; ;ret;--------------------------; :  |2001180|l     .i | calls:1 niv:2 len:2 (  --  )INICIO:;---------OPT; A664B6:windows	; [ ] ; A664BA:;	; [ ] ;---------ANA;---------GEN; windowsjmp w43; ; 